<%- include('header') %>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
<div class="container">
    <div style="text-align: center;">
        <h1 style="font-size: 3rem;">Mật khẩu mới</h1>
    </div>
    <form action="" method="" class="col-6 rounded p-3 m-auto">
        <div class="form-group mb-3">
            <label for="pass">Mật khẩu mới</label>
            <input type="password" class="form-control" name="password" id="pass" required>
        </div>
        <div class="form-group mb-3">
            <label for="pass">Nhập lại mật khẩu</label>
            <input type="password" class="form-control" name="passwordnew" id="passnew" required>
        </div>
        <h1 id="noti"></h1>
        <div class="form-group mt-3 ">
            <input style="font-size: 2rem; background: #ff1a1a;" type="submit" class="btn btn-danger px-4  py-2 text-white" value="Đổi mật khẩu" id="btnSubmit">
        </div>
    </form>
</div>

<script>
    
    document.querySelector('#btnSubmit').addEventListener('click', changePass);
    
    function changePass(e) {
        let pass = document.querySelector('#pass').value;
        let passnew = document.querySelector('#passnew').value;
        data = {
            password: passnew
        }
        let url = "changepass";
        if(pass == passnew){
            fetch(url, {
                method: "PUT",
        
                body: JSON.stringify(data),
        
                headers: {"Content-type": "application/json; charset=UTF-8"}
        
            });
            document.querySelector('#noti').style.color= 'green';
            document.querySelector('#noti').innerHTML = "Đổi mật khẩu thành công";
        } else {
            document.querySelector('#noti').style.color= 'red';
            document.querySelector('#noti').innerHTML = "Mật khẩu không khớp";
        }
        e.preventDefault();

    }
</script>
<%- include('footer') %> 